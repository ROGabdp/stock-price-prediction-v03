# 快速入門指南

**功能**: 股價漲跌機率預測系統  
**分支**: `001-stock-price-prediction`  
**日期**: 2025-11-13

## 簡介

本指南將協助您快速設定開發環境、啟動系統，並完成第一次模型訓練與預測。

**預計完成時間**: 15-20 分鐘

---

## 一、環境需求

### 硬體需求
- **記憶體**: 至少 8GB RAM（建議 16GB）
- **儲存空間**: 至少 5GB 可用空間
- **處理器**: 支援 AVX 指令集的 CPU（TensorFlow 需求）

### 軟體需求
- **Python**: 3.11+ （[下載連結](https://www.python.org/downloads/)）
- **Git**: 用於版本控制 （[下載連結](https://git-scm.com/)）
- **瀏覽器**: Chrome、Firefox 或 Edge（支援 HTML5）

---

## 二、環境設定

### 2.1 取得專案原始碼

```bash
# 複製專案
git clone <repository-url>
cd stock-price-prediction-v03
```

### 2.2 選擇運行模式

本專案支援兩種運行模式：
- **CPU 模式**（Windows）：適合測試與小資料集訓練
- **GPU 模式**（WSL2）：適合大規模訓練，速度快 4-6 倍

**若您有 NVIDIA GPU**，強烈建議使用 GPU 模式，請參考 `WSL2-GPU-SETUP.md` 完整設定指南。

### 2.3 建立 Python 虛擬環境（CPU 模式）

**Windows**:
```cmd
# 建立虛擬環境
python -m venv venv

# 啟動虛擬環境
venv\Scriptsctivate
```

**macOS / Linux**:
```bash
# 建立虛擬環境
python3 -m venv venv

# 啟動虛擬環境
source venv/bin/activate
```

**驗證**: 啟動後，命令提示字元前方應顯示 `(venv)`。

### 2.4 安裝後端依賴套件

```bash
cd backend
pip install -r requirements.txt
```

**安裝時間**: 約 5-10 分鐘（視網路速度而定）

**預期輸出**: 所有套件安裝成功，無錯誤訊息。

### 2.5 驗證安裝

```bash
# 驗證 TensorFlow 安裝
python -c "import tensorflow as tf; print(f'TensorFlow 版本: {tf.__version__}')"

# 驗證 Flask 安裝
python -c "import flask; print(f'Flask 版本: {flask.__version__}')"
```

**預期輸出**:
```
TensorFlow 版本: 2.16.1
Flask 版本: 3.0.0
```

---

## 三、啟動開發伺服器

### 3.1 啟動後端 API 伺服器

#### CPU 模式（Windows）

在專案根目錄執行：

```cmd
cd backend\src
python app.py
```

#### GPU 模式（WSL2）

在 WSL2 終端機執行：

```bash
# 啟動 WSL2（在 Windows PowerShell 中）
wsl -d Ubuntu_D

# 切換到專案並啟動虛擬環境
cd /mnt/d/000-github-repositories/stock-price-prediction-v03
source venv/bin/activate

# 啟動後端
cd backend/src
python3 app.py
```

**預期輸出（CPU 模式）**:
```
 * Running on http://127.0.0.1:5000
```

**預期輸出（GPU 模式）**:
```
============================================================
✓ 偵測到 1 個 NVIDIA GPU 裝置
  GPU 0: /physical_device:GPU:0
✓ GPU 記憶體成長模式已啟用
✓ 訓練將使用 GPU 加速
============================================================
 * Running on http://127.0.0.1:5000
```

**注意**: 保持此終端視窗開啟，後端伺服器將持續運行。

### 3.2 啟動前端開發伺服器

開啟**新的終端視窗**，切換至 `frontend/` 目錄：

```bash
cd frontend
python -m http.server 8000
```

**預期輸出**:
```
Serving HTTP on :: port 8000 (http://[::]:8000/) ...
```

### 3.3 存取系統

開啟瀏覽器，前往：
```
http://localhost:8000
```

**預期畫面**: 顯示「股價預測系統」首頁，包含導航選單（資料管理、模型訓練、預測執行）。

---

## 四、基本操作流程

### 4.1 上傳 CSV 資料檔案

1. 點擊導航選單「資料管理」
2. 點擊「匯入資料」按鈕
3. 選擇專案根目錄下的範例檔案：`19940513-20251111-converted.csv`
4. 輸入檔案名稱：`台股歷史資料`
5. 點擊「上傳」

**驗證**: 資料清單中顯示新上傳的檔案，包含資料範圍與筆數。

### 4.2 訓練第一個模型

1. 點擊導航選單「模型訓練」
2. 選擇資料檔案：`台股歷史資料`
3. 輸入模型名稱：`台股預測模型 v1`
4. 設定預測天數：`5`
5. 點擊「開始訓練」

**預期行為**:
- 系統顯示「訓練任務已啟動」訊息
- 顯示即時訓練進度（當前週期、損失值）
- 訓練完成後顯示評估指標

**訓練時間**: 約 3-10 分鐘（視資料量與硬體效能而定）

**訓練完成後**:
- 訓練準確率、驗證準確率、損失值
- 自動儲存模型

### 4.3 執行預測

1. 點擊導航選單「預測執行」
2. 選擇模型：`台股預測模型 v1`
3. 選擇資料檔案：`台股歷史資料`
4. 選擇預測起始日期：`2025-10-01`（或資料範圍內的任意日期）
5. 點擊「開始預測」

**預期行為**:
- 系統顯示「預測中...」提示
- 2-5 秒後顯示預測結果

### 4.4 查看視覺化結果

預測完成後，系統會自動顯示互動式圖表：

- **藍色實線**: 歷史股價走勢
- **紅色虛線**: 預測股價走勢
- **分界點**: 預測起始日期

**互動功能**:
- 滑鼠懸停：顯示特定日期的詳細數值
- 縮放：滾輪縮放圖表
- 平移：拖曳圖表

---

## 五、常見問題排除

### 5.1 後端伺服器無法啟動

**錯誤訊息**: `ModuleNotFoundError: No module named 'flask'`

**解決方案**:
```bash
# 確認虛擬環境已啟動
# 重新安裝依賴
pip install -r requirements.txt
```

---

### 5.2 前端無法連線後端

**錯誤訊息**: 瀏覽器控制台顯示 `CORS error` 或 `Failed to fetch`

**解決方案**:
1. 確認後端伺服器正在運行（http://127.0.0.1:5000）
2. 檢查 Flask-CORS 是否已安裝
3. 重新啟動後端伺服器

---

### 5.3 CSV 檔案上傳失敗

**錯誤訊息**: `CSV 檔案格式不正確，請確認包含必要欄位`

**解決方案**:
1. 檢查 CSV 檔案是否包含必要欄位：`date`, `open`, `high`, `low`, `close`, `volume`
2. 檢查日期格式是否為 `YYYY/M/D` 或 `YYYY-MM-DD`
3. 確認檔案編碼為 UTF-8
4. 參考範例檔案：`19940513-20251111-converted.csv`

---

### 5.4 模型訓練失敗

**錯誤訊息**: `歷史資料不足，至少需要 60 筆資料才能訓練模型`

**解決方案**:
- 確保 CSV 檔案至少包含 60 筆資料
- 若資料量不足，請使用更長時間範圍的歷史資料

---

**錯誤訊息**: `記憶體不足 (Out of Memory)`

**解決方案**:
1. 關閉其他佔用記憶體的應用程式
2. 在訓練時減少批次大小（batch_size）
3. 使用較小的資料集進行測試

---

### 5.5 預測結果為空

**錯誤訊息**: `預測起始日期必須在資料範圍內`

**解決方案**:
- 確認預測起始日期在資料檔案的時間範圍內
- 查看資料清單確認資料時間範圍

---

**錯誤訊息**: `預測起始日期之前的歷史資料不足`

**解決方案**:
- 選擇較晚的預測起始日期
- 模型需要至少 60 天的歷史資料作為輸入

---

## 六、下一步

恭喜！您已完成基本操作流程。接下來可以：

1. **訓練多個模型**: 嘗試不同的預測天數（1-30 天）
2. **比較模型**: 使用「模型比較」功能並排查看多個模型的預測結果
3. **匯入更多資料**: 上傳不同股票的歷史資料
4. **探索進階功能**: 查看訓練日誌、模型元資料、超參數配置

---

## 七、系統架構圖

```
使用者瀏覽器 (http://localhost:8000)
        │
        │ HTTP Request
        ↓
前端開發伺服器 (Python HTTP Server)
        │
        │ 提供靜態檔案 (HTML/CSS/JS)
        ↓
瀏覽器執行 JavaScript
        │
        │ Fetch API (CORS)
        ↓
後端 API 伺服器 (Flask, http://localhost:5000)
        │
        ├─→ 資料管理 API (/api/data/*)
        ├─→ 模型訓練 API (/api/models/train)
        ├─→ 模型管理 API (/api/models/*)
        └─→ 預測執行 API (/api/predict)
        │
        ↓
檔案系統
        ├─→ data/uploaded/*.csv (歷史資料)
        ├─→ data/metadata.json (元資料)
        └─→ models/*.keras (訓練模型)
```

---

## 八、支援與資源

- **專案文件**: 查看 `specs/001-stock-price-prediction/` 目錄
- **技術研究**: `research.md` - 技術選型決策
- **資料模型**: `data-model.md` - 資料結構定義
- **API 文件**: `contracts/api.yaml` - API 規格

---

**版本**: 1.0.0  
**最後更新**: 2025-11-13
